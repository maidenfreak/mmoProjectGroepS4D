<link href="style.css" rel="stylesheet" type="text/css">
<body>
<div id="content">
<div id="wrapper">
<div id="game">
<h1>Lobby</h1>
<h1>Hi <%= name %></h1>
            <script src="/socket.io/socket.io.js"></script>

          <h2>There are currently xxx people connected</h2>
            <button id="startButton" type="button" onclick="startTheGame()">Start</button>
            <br>
            <button id="joinButton" type="button" onclick="joinedLobby()">Join</button>
            <br>
            <ul id="players"></ul>

        <script src="/socket.io/socket.io.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
        <script>
          var playername='<%= name %>';
          var socket = io();

          socket.on('playerLobbies', function(allPlayers){
            $('#players').empty();
            for (i = 0; i<allPlayers.length; i++){
                  $('#players').append($('<li>').text(allPlayers[i]));
            }
          });

          function joinedLobby(){
            $(function () {
              socket.emit('playerLobby', '<%= name %>');
            });
          }
          
          function startTheGame(){
            $(function () {
              socket.emit('startGameServer');
            });
          }
        </script>
    </div>
    <script src="../static/game.js"></script>
    <div id="chat">
        <ul id="messages"></ul>
        <form action="" id="form">
          <input id="m" autocomplete="off" value=""/>
        </form>
        <script src="/socket.io/socket.io.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
        <script>
          var playername='<%= name %>';
            $(function () {
              var socket = io();
              $('form').submit(function(e){
                e.preventDefault(); // prevents page reloading
                socket.emit('chat message', '<%= name %>: '+$('#m').val());
                $('#m').val('');
                return false;
              });
              socket.on('chat message', function(msg){
                $('#messages').append($('<li>').text(msg));
              });
            });
          </script> 
    </div>
  </div>
  </div>
</body>